{% extends "base.html" %}

{% block title %}Home - Flask Blog{% endblock %}

{% block content %}
<div class="card">
    <h1> The Blog ðŸ™ƒ</h1>
    <p style="margin-top: 15px; font-size: 1.1rem;">
        Blog platform built with flask, User Authentication, CRUD .
    </p>
</div>

<h2 style="margin: 30px 0 20px;">Recent Posts</h2>

{% if posts %}
    {% for post in posts[:5] %}
    <div class="card">
        <h2><a href="{{ url_for('view_post', post_id=post.id) }}" style="color: #0d1115; text-decoration: none;">{{ post.title }}</a></h2>
        <div class="post-meta">
            By <strong>{{ post.author.username }}</strong> on {{ post.created_at.strftime('%B %d, %Y at %I:%M %p') }}
        </div>
        <p style="margin-top: 15px;">{{ post.content[:200] }}{% if post.content|length > 200 %}...{% endif %}</p>
        <a href="{{ url_for('view_post', post_id=post.id) }}" class="btn" style="margin-top: 15px;">Read More</a>
    </div>
    {% endfor %}
{% else %}
    <div class="card">
        <p>No posts yet. {% if current_user.is_authenticated %}<a href="{{ url_for('new_post') }}">Create the first one!</a>{% else %}<a href="{{ url_for('register') }}">Register</a> to create posts.{% endif %}</p>
    </div>
{% endif %}

<a href="{{ url_for('posts') }}" class="btn btn-secondary" style="margin-top: 20px;">View All Posts â†’</a>
{% endblock %}